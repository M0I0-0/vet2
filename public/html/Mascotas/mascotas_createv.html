<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <title>Nueva mascota</title>
  <link rel="stylesheet" href="../../css/form.css">
</head>

<body>
  <div class="cont">
    <h1>Nueva mascota</h1>

    <!-- ✅ Ruta del backend corregida -->
    <form action="/mascotas" method="post">

      <div class="input-container">
        <label>Nombre:</label>
        <input type="text" name="nombre" required><br>

        <label>Especie:</label>
        <input type="text" name="especie" required><br>

        <label>Raza:</label>
        <input type="text" name="raza" required><br>

        <label>Edad:</label>
        <input type="number" name="edad" required><br>

        <label>Peso:</label>
        <input type="number" step="0.01" name="peso" required><br>

        <!-- ✅ name corregido para Express -->
        <label>Cliente:</label>
        <select name="id_cliente" id="clienteSelect" required>
          <option value="">Selecciona un cliente</option>
        </select><br>
      </div>

      <div class="button-container">
        <input type="submit" value="Guardar">
        <a href="mascotas_readv.html">Regresar</a>
      </div>
    </form>
  </div>

  <script>
    function cargarClientes() {
      fetch('/clientes')
        .then(response => response.json())
        .then(data => {
          const select = document.getElementById('clienteSelect');
          data.forEach(cliente => {
            const option = document.createElement('option');
            option.value = cliente.id_cliente;
            option.textContent = cliente.nombre;
            select.appendChild(option);
          });
        })
        .catch(error => console.error("Error al cargar clientes:", error));
    }

    document.addEventListener("DOMContentLoaded", cargarClientes);
  </script>

  <script src="../Js/auth.js" defer></script>
</body>

</html>
